"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{9347:function(e,a,r){r.d(a,{Z:function(){return C}});var t=r(5893),s=r(7294),l=r(1654),o=r(9603),i=r(9417),n=r(4193),u=r(4579),c=r(4628),m=r(9544);let d={isLoading:!1,isTouched:!1,formData:{email:{value:"",error:""},password:{value:"",error:""},formError:{error:""}}},f=(e,a)=>{switch(a.type){case"SET_LOADING":return{...e,isLoading:a.payload};case"SET_TOUCHED":return{...e,isTouched:!0};case"SET_FORM_DATA":return{...e,formData:a.payload};case"CLEAR_FORM":return d;default:return e}};var p=()=>(0,s.useReducer)(f,d),h=r(1163),D=r(9299),x=r(6986),y=r(7245),w=r(9332),E=r(2851),v=r(316),_=r(8218);let N=async(e,a)=>{try{await (0,v.e5)(_.I,e,a)}catch(e){throw e}};var g=()=>{let[e,a]=p(),r=(0,w.usePathname)(),{hideModal:t,currentModal:s}=(0,y.d)(),{id:l}=s||{},o=(0,h.useRouter)(),i=/\S+@\S+\.\S+/.test(e.formData.email.value),n=e.formData.password.value.length>0,u=function(r,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a({type:"SET_FORM_DATA",payload:{...e.formData,[r]:{...e.formData[r],value:t,error:s}}}),e.isTouched||a({type:"SET_TOUCHED",payload:!0})},c=r=>{a({type:"SET_FORM_DATA",payload:{...e.formData,formError:{error:r}}})},m=()=>{a({type:"CLEAR_FORM"})},d=async s=>{if(s.preventDefault(),a({type:"SET_LOADING",payload:!0}),i&&n&&e.isTouched)try{await N(e.formData.email.value,e.formData.password.value),c(""),m(),t(l);let a=null;switch(!0){case r===x._L:a="/";break;case r===x.vE:let s=await (0,E.jl)(),i=s.uid;a=x.A6.replace("{userId}",i)}null!==a&&await o.push(a)}catch(e){c(e.toString())}finally{a({type:"SET_LOADING",payload:!1})}else a({type:"SET_FORM_DATA",payload:{...e.formData,email:{...e.formData.email,error:i?"":D.R.INVALID_EMAIL},password:{...e.formData.password,error:n?"":D.R.REQUIRED_FIELD}}}),a({type:"SET_LOADING",payload:!1})};return{state:e,handleEmailChange:e=>{let a=""===e.target.value?D.R.INVALID_EMAIL:"";u("email",e.target.value,a)},handlePasswordChange:e=>{let a=""===e.target.value?D.R.REQUIRED_FIELD:"";u("password",e.target.value,a)},handleLogin:d}},j=()=>{let{state:e,handleEmailChange:a,handlePasswordChange:r,handleLogin:s}=g();return(0,t.jsx)("div",{className:"w-full flex flex-col justify-center items-center",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("form",{onSubmit:s,className:"flex flex-col justify-center items-center gap-4",children:[(0,t.jsx)(u.Z,{id:"userEmail",label:"Email",value:e.formData.email.value,error:e.formData.email.error,onChange:a,icon:i.IBq,required:!0,placeholder:"Email"}),(0,t.jsx)(u.Z,{id:"userPassword",label:"Password",value:e.formData.password.value,error:e.formData.password.error,onChange:r,icon:i.DD4,required:!0,type:"password",placeholder:"Password"}),e.formData.formError.error&&(0,t.jsx)(m.Z,{className:"px-4 py-2 bg-rose-600/20 w-full rounded-md",error:e.formData.formError.error}),(0,t.jsx)(n.Z,{className:"mt-8 w-full",type:"submit",children:e.isLoading?(0,t.jsx)(c.Z,{isShowText:!0,type:"static"}):"Submit"})]})})})};let A={isLoading:!1,isTouched:!1,formData:{name:{value:"",error:""},email:{value:"",error:""},password:{value:"",error:""},formError:{error:""}}},R=(e,a)=>{switch(a.type){case"SET_FORM_DATA":return{...e,formData:a.payload};case"SET_LOADING":return{...e,isLoading:a.payload};case"SET_TOUCHED":return{...e,isTouched:!0};case"CLEAR_FORM":return A;default:return e}};var S=()=>(0,s.useReducer)(R,A),I=r(9105);let L=async e=>{let a="users/".concat(e.uid),r=(0,I.iH)(_.F,a),t={info:{displayName:e.displayName,id:e.uid,email:e.email,photoURL:e.photoURL}};await (0,I.t8)(r,t)},T=async(e,a,r)=>{try{let t=await (0,v.Xb)(_.I,e,a),s=t.user,l="https://api.dicebear.com/5.x/thumbs/svg?seed=".concat(s.uid);await (0,v.ck)(s,{displayName:r,photoURL:l}),await L(s),await (0,v.e5)(_.I,e,a)}catch(e){throw e}};var b=()=>{let[e,a]=S(),r=(0,h.useRouter)(),{hideModal:t,currentModal:l}=(0,y.d)(),{id:o}=l||{},i=(0,w.usePathname)(),n=(0,s.useMemo)(()=>"/auth"===i,[i]),u=""!==e.formData.name.value.trim(),c=/\S+@\S+\.\S+/.test(e.formData.email.value),m=e.formData.password.value.length>=6,d=function(r,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a({type:"SET_FORM_DATA",payload:{...e.formData,[r]:{...e.formData[r],value:t,error:s}}}),e.isTouched||a({type:"SET_TOUCHED",payload:!0})},f=r=>{a({type:"SET_FORM_DATA",payload:{...e.formData,formError:{error:r}}})},p=()=>{a({type:"CLEAR_FORM"})},x=async s=>{if(s.preventDefault(),a({type:"SET_LOADING",payload:!0}),u&&c&&m&&e.isTouched)try{await T(e.formData.email.value,e.formData.password.value,e.formData.name.value),f(""),p(),t(o),n&&await r.push("/")}catch(e){f(e.toString())}finally{a({type:"SET_LOADING",payload:!1})}else a({type:"SET_FORM_DATA",payload:{...e.formData,name:{...e.formData.name,error:u?"":D.R.REQUIRED_FIELD},email:{...e.formData.email,error:c?"":D.R.INVALID_EMAIL},password:{...e.formData.password,error:m?"":D.R.INVALID_PASSWORD}}}),a({type:"SET_LOADING",payload:!1})};return{state:e,handleNameChange:e=>{let a=""===e.target.value?D.R.REQUIRED_FIELD:"";d("name",e.target.value,a)},handleEmailChange:e=>{let a=""===e.target.value?D.R.INVALID_EMAIL:"";d("email",e.target.value,a)},handlePasswordChange:e=>{let a=""===e.target.value?D.R.INVALID_PASSWORD:"";d("password",e.target.value,a)},handleSignUp:x}},O=()=>{let{state:e,handleNameChange:a,handleEmailChange:r,handlePasswordChange:s,handleSignUp:l}=b();return(0,t.jsx)("div",{className:"w-full flex flex-col justify-center items-center",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("form",{onSubmit:l,autoComplete:"off",className:"flex flex-col justify-center items-center gap-4",children:[(0,t.jsx)(u.Z,{id:"userName",label:"Name",value:e.formData.name.value,error:e.formData.name.error,onChange:a,icon:i.ILF,required:!0,placeholder:"Name"}),(0,t.jsx)(u.Z,{id:"userEmail",label:"Email",value:e.formData.email.value,error:e.formData.email.error,onChange:r,icon:i.IBq,required:!0,placeholder:"Email"}),(0,t.jsx)(u.Z,{id:"userPassword",label:"Password",value:e.formData.password.value,error:e.formData.password.error,onChange:s,icon:i.DD4,required:!0,type:"password",placeholder:"Password"}),e.formData.formError.error&&(0,t.jsx)(m.Z,{className:"px-4 py-2 bg-rose-600/20 w-full rounded-md",error:e.formData.formError.error}),(0,t.jsx)(n.Z,{className:"mt-8 w-full",type:"submit",children:e.isLoading?(0,t.jsxs)("span",{className:"flex justify-center items-center",children:["Loading"," ",(0,t.jsx)(c.Z,{type:"static",className:"ml-2"})]}):"Submit"})]})})})},C=()=>{let[e,a]=(0,s.useState)(!0);return(0,t.jsxs)("div",{className:"h-full flex flex-1 flex-col justify-center items-center",children:[(0,t.jsxs)("div",{className:"flex justify-center items-center mb-12 gap-4",children:[(0,t.jsx)(l.Z,{className:"!mb-0 after:hidden !pb-0",children:e?"Sign up":"Login"}),(0,t.jsx)(o.G,{className:"text-2xl text-rose-600",icon:e?i.FKd:i.TEX})]}),e?(0,t.jsx)(O,{}):(0,t.jsx)(j,{}),(0,t.jsxs)("div",{className:"flex justify-center items-center flex-wrap mt-12 gap-2",children:[(0,t.jsx)("p",{children:e?"Do you already have an account?":"Do you want to create a new account?"}),(0,t.jsx)(n.Z,{context:"text",className:"mt-0",onClick:()=>a(!e),children:e?"Login":"Sign up"})]})]})}},9544:function(e,a,r){var t=r(5893),s=r(4184),l=r.n(s);a.Z=e=>{let{error:a,className:r}=e;return(0,t.jsx)("span",{className:l()("w-full text-sm text-rose-600 font-semibold block mt-2",r),children:a})}},4579:function(e,a,r){var t=r(5893),s=r(7294),l=r(4184),o=r.n(l),i=r(9603),n=r(9417),u=r(9544),c=r(4193);a.Z=e=>{let{id:a,label:r,value:l,onChange:m,error:d,type:f="text",placeholder:p="Enter your text...",className:h,additionalInputClassName:D,icon:x,required:y}=e,[w,E]=(0,s.useState)(!1),v="truncate w-full h-full bg-transparent autofill:shadow-[inset_0_0_0px_1000px_#000000/0] autofill:caret-white outline-none block";return(0,t.jsxs)("div",{className:"w-full h-full",children:[(0,t.jsxs)("label",{htmlFor:a,className:o()("w-full h-full bg-gray-950 pt-1 px-3 pb-2 border border-gray-500 hover:border-white focus-within:border-white duration-300 block",h,d&&"!border-rose-600"),children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 font-semibold",children:"".concat(r).concat(y?" *":"")}),(0,t.jsx)("span",{className:"flex justify-between items-center",children:(0,t.jsxs)("span",{className:o()("w-full flex justify-start items-center",D),children:[x&&(0,t.jsx)(i.G,{className:"text-sm mr-2",icon:x}),"password"===f?(0,t.jsxs)("span",{className:"w-full flex justify-between items-center",children:[(0,t.jsx)("input",{value:l,onChange:m,type:w?"text":"password",id:a,placeholder:p,className:v}),(0,t.jsx)(c.Z,{className:"!w-auto !h-auto hover:bg-transparent",context:"icon",onClick:()=>E(!w),children:(0,t.jsx)(i.G,{icon:w?n.Aq:n.Mdf})})]}):(0,t.jsx)("input",{value:l,onChange:m,type:f,id:a,placeholder:p,className:v})]})})]}),d&&(0,t.jsx)(u.Z,{className:"self-start",error:d})]})}},9299:function(e,a,r){r.d(a,{R:function(){return t}});let t={REQUIRED_FIELD:"This field is required",INVALID_EMAIL:"Please enter a valid email address",INVALID_PASSWORD:"Password length must be at least 6 characters",SAME_PASSWORDS:"Your new password must not be the same as your old one"}}}]);