"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{2062:function(e,t,s){var a=s(5893),l=s(4193),n=s(4184),r=s.n(n);t.Z=e=>{let{value:t,label:s,onClick:n,closeList:c,className:i}=e;return(0,a.jsx)(l.Z,{context:"listItem",onClick:()=>{n&&n(t,s),c&&c()},className:r()("w-full z-10 text-left",i),children:s})}},50:function(e,t,s){var a=s(5893),l=s(7294),n=s(4184),r=s.n(n),c=s(2318),i=s(9417),o=s(9603),u=s(4193);t.Z=e=>{let{children:t,label:s,onChange:n,defaultValue:m,name:f,className:d}=e,h=(0,l.useRef)(null),[x,p]=(0,l.useState)(m),{isOpen:j,onToggleContainer:b,onCloseContainer:g}=(0,c.m)(h),v=(e,t)=>{f?n(f,e):n(e),p(t)},y=l.Children.map(t,e=>(0,l.isValidElement)(e)?(0,l.cloneElement)(e,{onClick:v,closeList:g}):e);return(0,l.useEffect)(()=>{m&&p(m)},[m]),(0,a.jsxs)("div",{ref:h,className:r()("relative w-full h-16",d),children:[(0,a.jsxs)(u.Z,{context:"field",onClick:b,children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 font-semibold absolute top-2 left-3 z-10",children:s}),(0,a.jsxs)("span",{className:"absolute top-7 left-3 w-[calc(100%-22px)] flex justify-between items-center",children:[(0,a.jsx)("span",{className:"truncate leading-5",children:x}),(0,a.jsx)(o.G,{icon:i.ptq})]})]}),j&&(0,a.jsx)("div",{className:"w-full absolute top-full flex flex-col items-center flex-none h-60 border border-gray-500 overflow-y-auto scrollbar-hide bg-gray-950 shadow-[0_35px_60px_15px_rgba(3,7,18,1)] z-20",children:y})]})}},5221:function(e,t,s){s.d(t,{Z:function(){return Z}});var a=s(5893),l=s(9417),n=s(4579),r=s(7294),c=s(2342),i=s(4628),o=s(4193),u=e=>{let{item:t,fieldName:s,onSelect:l}=e;return(0,a.jsx)(o.Z,{onClick:()=>l(s,{id:t.id,name:t.name}),context:"listItem",className:"w-full z-10",children:t.name},t.id)},m=s(381),f=s.n(m),d=s(8878),h=s(1664),x=s.n(h),p=e=>{let{item:t,collectionType:s}=e,{id:l,title:n,name:r,release_date:c,first_air_date:i,media_type:o}=t,u=o||s;return(0,a.jsxs)(x(),{href:"/".concat(u,"/[id]"),as:"/".concat(u,"/").concat(l),className:"flex justify-start items-center gap-4 w-full hover:bg-rose-600 duration-300 p-2",children:[(0,a.jsx)(d.Z,{itemId:l,className:"!w-16 !h-24",collectionType:u}),(0,a.jsx)("span",{children:(0,a.jsxs)("span",{className:"flex flex-col justify-start items-start",children:[(0,a.jsx)("span",{className:"font-semibold",children:null!=n?n:r}),(c||i)&&(0,a.jsxs)("span",{className:"text-xs font-light",children:["(",f()(null!=c?c:i).format("YYYY"),")"]})]})})]})},j=s(1590),b=e=>{let{itemsList:t,isMoreDataAvailable:s,isSearchQueryUpdate:l,urlToFetch:n,onSelectItem:o,onClose:m,name:f,collectionType:d=j.zS.basic}=e,h=(0,r.useRef)(null),{isLoading:x,items:b}=(0,c.M)(h,t,s,n),g=(e,t)=>{let{id:s,name:a}=t;o(e,{id:s,name:a}),m()};return(0,a.jsx)("div",{ref:h,className:"w-full absolute top-full flex flex-col items-start flex-none h-60 box-content border border-gray-500 overflow-y-auto scrollbar-hide bg-gray-950 shadow-[0_35px_60px_15px_rgba(3,7,18,1)] z-20",children:l?(0,a.jsx)(i.Z,{type:"static",className:"mb-4"}):(0,a.jsxs)(a.Fragment,{children:[!b.length&&(0,a.jsx)("span",{className:"mt-4 mx-auto",children:"No results found"}),b.map(e=>{switch(d){case"basic":return(0,a.jsx)(u,{item:e,fieldName:f,onSelect:g},e.id);case"movie":case"tv":case"person":return(0,a.jsx)(p,{item:e,collectionType:d},e.id)}}),x&&(0,a.jsx)(i.Z,{type:"static",className:"mb-4"})]})})},g=s(9544),v=s(9603),y=s(5037),N=s(2318),S=s(9299),w=e=>{let{onSearch:t,urlToFetch:s,defaultUrlToFetch:a,isSearchApplied:l}=e,n=(0,r.useRef)(null),[c,i]=(0,r.useState)(!1),[o,u]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[x,p]=(0,r.useState)([]),[j,b]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),{isOpen:w,onOpenContainer:Z,onCloseContainer:E}=(0,N.m)(n,d.length>0),C=s.replace("{searchQuery}",d),_=d.length>0||l,k=()=>{E(),p([]),h("")},I=async e=>{e.preventDefault();let s=d.length>0;s&&o?(t(C),k()):(b(S.R.REQUIRED_FIELD),i(!1))};return(0,r.useEffect)(()=>{let e=async()=>{let e=new AbortController,t=e.signal;p([]),b(""),f(!0);try{if(t){let e=await (0,y.Z)(C,1,t);p(e.items),v(e.isMoreDataAvailable),f(!1)}}catch(e){b("Error fetching data")}finally{e.abort()}};if(d.length>0){w||Z();let t=setTimeout(e,500);return()=>{clearTimeout(t)}}},[d,C]),{containerRef:n,isLoading:c,urlToFetchWithSearchQuery:C,isShowClearButton:_,isSearchQueryUpdate:m,searchQuery:d,results:x,error:j,isMoreDataAvailable:g,isOpen:w,handleInputChange:e=>{h(e.target.value),o||u(!0)},cancelSearch:()=>{k(),t(a)},resetSearch:k,handleSearch:I}},Z=e=>{let{name:t,label:s,urlToFetch:r,onSearch:c,collectionType:u,defaultUrlToFetch:m,isSearchApplied:f=!1,isSearchFieldWrapped:d=!1}=e,{containerRef:h,isLoading:x,urlToFetchWithSearchQuery:p,isShowClearButton:j,isSearchQueryUpdate:y,searchQuery:N,results:S,error:Z,isMoreDataAvailable:E,isOpen:C,handleInputChange:_,cancelSearch:k,resetSearch:I,handleSearch:T}=w({onSearch:c,urlToFetch:r,defaultUrlToFetch:m,isSearchApplied:f}),L=(0,a.jsxs)("div",{ref:h,className:"relative h-16",children:[(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsx)(n.Z,{id:t,label:s,value:N,onChange:_,icon:l.Y$T,placeholder:"Search",additionalInputClassName:"max-w-[calc(100%-128px)]"}),d&&(0,a.jsxs)("div",{className:"absolute inset-y-1/2 -translate-y-1/2 right-4 flex justify-end items-center gap-4",children:[(0,a.jsx)(o.Z,{type:"submit",context:"text",children:x?(0,a.jsx)(i.Z,{type:"static"}):"Submit"}),j&&(0,a.jsx)(o.Z,{context:"icon",onClick:k,children:(0,a.jsx)(v.G,{icon:l.g82,className:"w-6 h-6"})})]})]}),C&&(0,a.jsx)(b,{collectionType:u,itemsList:S,isMoreDataAvailable:E,urlToFetch:p,onSelectItem:c,name:t,onClose:I,isSearchQueryUpdate:y})]});return(0,a.jsx)(a.Fragment,{children:d?(0,a.jsxs)("form",{className:"mb-4 bg-gray-950",onSubmit:T,children:[L,Z&&(0,a.jsx)(g.Z,{className:"px-4 py-2 bg-rose-600/20 w-full rounded-md",error:Z})]}):L})}},8878:function(e,t,s){s.d(t,{Z:function(){return b}});var a=s(5893),l=s(7294),n=s(3028),r=s(3087),c=s(1664),i=s.n(c),o=s(9608),u=s(9810);let m=async(e,t)=>{let s=await (0,u.R)(t,e,"");return s.poster_path||s.profile_path};var f=s(9417),d=s(9603),h=s(4184),x=s.n(h),p=s(1590),j=s(1084),b=e=>{let{itemId:t,collectionType:s,mark:c,isLinkToMovie:u=!1,className:h=!1}=e,[b,g]=(0,l.useState)(""),v=b?j.hm.replace("{imageSrc}",b):"";(0,l.useEffect)(()=>{m(t,s).then(e=>{g(e)})},[]);let y=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"duration-300 mb-4 border-4",src:v,defaultImage:s!==p.zS.person?n.Z:r.Z}),c&&(0,a.jsxs)("span",{className:"flex justify-center items-center",children:[(0,a.jsx)(d.G,{icon:f.Tab,className:"text-rose-500"}),(0,a.jsx)("span",{className:"ml-1 font-semibold",children:c})]})]});return(0,a.jsx)("span",{className:x()(!c&&"w-24 h-36","flex-none",h),children:u?(0,a.jsx)(i(),{href:"/".concat(s,"/[id]"),as:"/".concat(s,"/").concat(t),children:y}):y})}},5410:function(e,t,s){s.d(t,{Z:function(){return v}});var a=s(5893),l=s(1654),n=s(4033),r=s(1590),c=s(2062),i=s(50),o=e=>{let{onChange:t,defaultSortValue:s}=e,l=Object.keys(r.IE).find(e=>r.IE[e]===s);return(0,a.jsx)(i.Z,{label:"Sort by",onChange:e=>t(e),defaultValue:l,className:"!w-48 ml-auto",children:Object.values(r.IE).map((e,t)=>(0,a.jsx)(c.Z,{value:e,className:"text-sm !font-light",label:Object.keys(r.IE)[t]},e))})},u=s(1207),m=s(4193),f=s(4628),d=s(7245),h=s(7294),x=s(5037),p=s(2624),j=(e,t)=>{let{onEmptyList:s,urlToFetchItems:a,isMoreDataAvailable:l,isFilterable:n}=t,{showModal:r}=(0,d.d)(),[c,i]=(0,h.useState)(!1),[o,u]=(0,h.useState)(1),[m,f]=(0,h.useState)([]),[j,b]=(0,h.useState)(l),g=e=>{i(!0),(0,x.Z)(a,e).then(e=>{let t=[];e.items.length||s(!0),e.items.map(e=>{let s=m.find(t=>t.id===e.id);s||t.push(e)}),0!==t.length?f(e=>[...e,...t]):f(e=>[...e,...m]),b(e.isMoreDataAvailable)}).catch(()=>{(0,p.s9)(r,"An error has occurred"),s(!0)}).finally(()=>{i(!1)})},v=()=>{f([]),u(1),b(!n&&l),g(1)};return(0,h.useEffect)(()=>{o>1&&g(o)},[o]),(0,h.useEffect)(()=>{v()},[e,a]),{itemsToShow:m,isLoading:c,isShowMoreButton:j,showMore:()=>{u(e=>e+1)}}},b=e=>{let{itemsList:t,collectionType:s,isMoreDataAvailable:l,urlToFetchItems:n,onEmptyList:r,isFilterable:c=!1}=e,{itemsToShow:i,isLoading:o,isShowMoreButton:d,showMore:h}=j(t,{onEmptyList:r,urlToFetchItems:n,isMoreDataAvailable:l,isFilterable:c});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-[repeat(auto-fill,232px)] gap-x-5 justify-center",children:i.map(e=>(0,a.jsx)(u.Z,{item:e,collectionType:s},e.id))}),o&&(0,a.jsx)(f.Z,{type:"static",className:"mb-4"}),d&&(0,a.jsx)(m.Z,{className:"mx-auto",context:"empty",onClick:h,children:"Show more"})]})},g=(e,t)=>{let{urlToFetchItems:s,isSortable:a}=t,[l,n]=(0,h.useState)(!0),[r,c]=(0,h.useState)(s),[i,o]=(0,h.useState)(!e.length),u=a?new URLSearchParams(s).get("sort_by"):void 0;return(0,h.useEffect)(()=>{c(s),l?n(!1):o(!1)},[s]),{defaultSortValue:u,urlToFetch:r,isShowEmptyList:i,handleSortChange:e=>{let t=r.replace(/(sort_by=)[^&]*/,"$1".concat(e));c(t)},setIsShowEmptyList:o}},v=e=>{let{itemsList:t,collectionType:s,isMoreDataAvailable:r,urlToFetchItems:c,title:i,isFilterable:u=!1,isSortable:m=!1}=e,{defaultSortValue:f,urlToFetch:d,isShowEmptyList:h,handleSortChange:x,setIsShowEmptyList:p}=g(t,{urlToFetchItems:c,isSortable:m});return h?(0,a.jsx)(n.Z,{title:i}):(0,a.jsxs)("div",{className:"mb-16",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[i&&(0,a.jsx)(l.Z,{className:"!mb-0",children:i}),m&&(0,a.jsx)(o,{onChange:x,defaultSortValue:f})]}),(0,a.jsx)(b,{itemsList:t,collectionType:s,isMoreDataAvailable:r,urlToFetchItems:d,isFilterable:u,onEmptyList:p})]})}},5037:function(e,t,s){s.d(t,{Z:function(){return l}});var a=s(3863);let l=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{let l=await fetch(e.replace("{currentPage}",t.toString()),s?{signal:s}:{}),n=await fetch(e.replace("{currentPage}",(t+1).toString()));if(!l.ok)throw"Failed to fetch";let r=await l.json(),c=await n.json();try{let e=await (0,a.v)(r.results);return{items:e,isMoreDataAvailable:!!c.results.length}}catch(e){throw e}}catch(e){throw e}}},2318:function(e,t,s){s.d(t,{m:function(){return l}});var a=s(7294);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[s,l]=(0,a.useState)(t),n=()=>{l(!1)};return(0,a.useEffect)(()=>{let t=t=>{e.current&&!e.current.contains(t.target)&&n()};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[e]),{isOpen:s,onToggleContainer:()=>{l(!s)},onOpenContainer:()=>{l(!0)},onCloseContainer:n}}},2342:function(e,t,s){s.d(t,{M:function(){return n}});var a=s(7294),l=s(5037);let n=(e,t,s,n)=>{let[r,c]=(0,a.useState)(!1),[i,o]=(0,a.useState)(s),[u,m]=(0,a.useState)(1),[f,d]=(0,a.useState)([]),h=async()=>{1===u&&d([]),(0,l.Z)(n,u).then(e=>{d(t=>[...t,...e.items]),o(e.isMoreDataAvailable)}).finally(()=>{c(!1)})};return(0,a.useEffect)(()=>{u>1&&h()},[u]),(0,a.useEffect)(()=>{d([...t])},[t]),(0,a.useEffect)(()=>{o(s)},[s]),(0,a.useEffect)(()=>{m(1),o(!0)},[n]),(0,a.useEffect)(()=>{let t=e.current,s=()=>{t&&t.scrollHeight-t.scrollTop===t.clientHeight&&!r&&i&&(c(!0),m(e=>e+1))};return t&&t.addEventListener("scroll",s),()=>{t&&t.removeEventListener("scroll",s)}},[e,i,r]),{isLoading:r,items:f}}}}]);